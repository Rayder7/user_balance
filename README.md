# Опиание ТЗ.
ТЗ:
- 1.Разработать API для работы со балансом пользователя и перемещении денег между пользователями системы
У каждого пользователя есть свой баланс, изначально он равен 0.
- 2.Разработать API, который принимает число (количество копеек) и увеличивает баланс залогиненного пользователя на данное число. Абстрагируемся от реально оплаты и денег, реализуя лишь последний шаг зачисления денег на  баланс. Он может пополнить свой баланс в любой момент времени.
- 3.Разработать API, который производит списание с текущего баланса пользователя на баланс другого пользователя по user_id по требованию (перевод денег). Только залогиненный пользователь может производить списания со своего баланса, но начисления возможны без каких-либо подтверждений со  стороны получателя.
- 4.Разработать API, который возвращает текущий баланс залогиненого пользователя в рублях.

Дополнительные требования:
- 5.вести учет транзакций по операциям пополнения баланса
- 6.вести учет транзакций по операциям переводов между пользователями
- 7.запрещать переводы, если сумма перевода  для  инициатора превышает его  текущий баланс
- 8.предусмотреть случаи одновременного пополнения и списания денег в рамках одного пользователя (мне прислали 100 рублей и одновременно в ту же секунду/долю  секунды я положил 1 рубль- баланс должен быть 101, а не 100  или  1).

## Инструкции по установке
*** Клонируйте репозиторий:***
```
git clone git@github.com:rayder7/user_balance.git
```


### Запуск на пк:
***Зайти в директорию /src и использовать команды:***
```
python manage.py makemigrations

python manage.py migrate

python manage.py runserver
```
### Запуск на docker-compose:
***Зайти в директорию /etc и использовать команды:***
```
docker-compose up -d

docker-compose exec backend python manage.py migrate

```

```
http://127.0.0.1:8000/api/sign-up/ - создаем пользователей
```

```
http://127.0.0.1:8000/api/login/ - POST запрос на вход пользователя
```
Пример:
```
    {
        "username": "user",
        "password": 12345678
    }
```
```
http://127.0.0.1:8000/api/logout/ - POST запрос на выход пользователя
```

```
http://127.0.0.1:8000/api/balance/ - GET запрос - Проверка баланса
```

```
http://127.0.0.1:8000/api/balance/transfer/ - GET запрос - Архив переводов
```

```
http://127.0.0.1:8000/api/balance/transfer/ - POST запрос - оформить перевод
```
Пример:
```
{
    "user": "user",
    "partisipant": "user2"
    "amount": 2000
}
```

```
http://127.0.0.1:8000/api/balance/deposit/ - GET запрос - архив пополнений
```

```
http://127.0.0.1:8000/api/balance/deposit/ - POST запрос - пополнения счета
```
Пример:
```
{
    "user": "user",
    "amount": 50
}
```
