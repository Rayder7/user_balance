# Опиание ТЗ.
ТЗ:
- 1.Разработать API для работы со балансом пользователя и перемещении денег между пользователями системы
У каждого пользователя есть свой баланс, изначально он равен 0.
- 2.Разработать API, который принимает число (количество копеек) и увеличивает баланс залогиненного пользователя на данное число. Абстрагируемся от реально оплаты и денег, реализуя лишь последний шаг зачисления денег на  баланс. Он может пополнить свой баланс в любой момент времени.
- 3.Разработать API, который производит списание с текущего баланса пользователя на баланс другого пользователя по user_id по требованию (перевод денег). Только залогиненный пользователь может производить списания со своего баланса, но начисления возможны без каких-либо подтверждений со  стороны получателя.
- 4.Разработать API, который возвращает текущий баланс залогиненого пользователя в рублях.

Дополнительные требования:
- 5.вести учет транзакций по операциям пополнения баланса
- 6.вести учет транзакций по операциям переводов между пользователями
- 7.запрещать переводы, если сумма перевода  для  инициатора превышает его  текущий баланс
- 8.предусмотреть случаи одновременного пополнения и списания денег в рамках одного пользователя (мне прислали 100 рублей и одновременно в ту же секунду/долю  секунды я положил 1 рубль- баланс должен быть 101, а не 100  или  1).

## Инструкции по установке
*** Клонируйте репозиторий:***
```
git clone git@github.com:rayder7/user_balance.git
```


### Запуск:
```
docker-compose up -d
```
```
http://127.0.0.1:8000/api/users/ - создаем пару пользователей
```

```
http://127.0.0.1:8000/api/auth/token/login - получаем токен
```
***Дальше удобнее использовать Postman:***
***в Headers добавляем Authorization - Token <token>***

```
http://127.0.0.1:8000/api/users/me/ - GET запрос - информация о пользователе

```
```
http://127.0.0.1:8000/api/check_balance/ - GET запрос - Проверка баланса
```

```
http://127.0.0.1:8000/api/action/ - GET запрос - Архив пополнений
```

```
http://127.0.0.1:8000/api/action/ - POST запрос - Полполнить счет
```
Пример:
```
{
    "user": "1",
    "amount": 2000
}
```

```
http://127.0.0.1:8000/api/transfer/ - GET запрос - переводов
```

```
http://127.0.0.1:8000/api/transfer/- POST запрос - перевод пользователю. Есть валидация, на amount < balance
```
Пример:
```
{
    "from_user": "user",
    "to_user": "user2",
    "amount": 500
}
```
